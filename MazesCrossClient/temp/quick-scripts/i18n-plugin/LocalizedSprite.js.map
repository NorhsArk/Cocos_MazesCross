{"version":3,"sources":["LocalizedSprite.js"],"names":["SpriteFrameSet","require","cc","Class","extends","Component","editor","executeInEditMode","inspector","menu","properties","spriteFrameSet","default","type","onLoad","fetchRender","sprite","getComponent","Sprite","updateSprite","window","i18n","curLang","getSpriteFrameByLang","lang","i","length","language","spriteFrame","error"],"mappings":";;;;;;AAAA,IAAMA,iBAAiBC,QAAQ,gBAAR,CAAvB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,YAAQ;AACJC,2BAAmB,IADf;AAEJC,mBAAW,+CAFP;AAGJC,cAAM;AAHF,KAHH;;AASLC,gBAAY;AACRC,wBAAgB;AACZC,qBAAS,EADG;AAEZC,kBAAMb;AAFM;AADR,KATP;;AAgBLc,UAhBK,oBAgBK;AACN,aAAKC,WAAL;AACH,KAlBI;AAoBLA,eApBK,yBAoBU;AACX,YAAIC,SAAS,KAAKC,YAAL,CAAkBf,GAAGgB,MAArB,CAAb;AACA,YAAIF,MAAJ,EAAY;AACR,iBAAKA,MAAL,GAAcA,MAAd;AACA,iBAAKG,YAAL,CAAkBC,OAAOC,IAAP,CAAYC,OAA9B;AACA;AACH;AACJ,KA3BI;AA6BLC,wBA7BK,gCA6BiBC,IA7BjB,EA6BuB;AACxB,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKd,cAAL,CAAoBe,MAAxC,EAAgD,EAAED,CAAlD,EAAqD;AACjD,gBAAI,KAAKd,cAAL,CAAoBc,CAApB,EAAuBE,QAAvB,KAAoCH,IAAxC,EAA8C;AAC1C,uBAAO,KAAKb,cAAL,CAAoBc,CAApB,EAAuBG,WAA9B;AACH;AACJ;AACJ,KAnCI;AAqCLT,gBArCK,wBAqCSQ,QArCT,EAqCmB;AACpB,YAAI,CAAC,KAAKX,MAAV,EAAkB;AACdd,eAAG2B,KAAH,CAAS,iEAAT;AACA;AACH;;AAED,YAAID,cAAc,KAAKL,oBAAL,CAA0BI,QAA1B,CAAlB;;AAEA,YAAI,CAACC,WAAD,IAAgB,KAAKjB,cAAL,CAAoB,CAApB,CAApB,EAA4C;AACxCiB,0BAAc,KAAKjB,cAAL,CAAoB,CAApB,EAAuBiB,WAArC;AACH;;AAED,aAAKZ,MAAL,CAAYY,WAAZ,GAA0BA,WAA1B;AACH;AAlDI,CAAT","file":"LocalizedSprite.js","sourceRoot":"..\\..\\..\\..\\..\\packages\\i18n\\runtime-scripts","sourcesContent":["const SpriteFrameSet = require('SpriteFrameSet');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    editor: {\r\n        executeInEditMode: true,\r\n        inspector: 'packages://i18n/inspector/localized-sprite.js',\r\n        menu: 'i18n/LocalizedSprite'\r\n    },\r\n\r\n    properties: {\r\n        spriteFrameSet: {\r\n            default: [],\r\n            type: SpriteFrameSet\r\n        }\r\n    },\r\n\r\n    onLoad () {\r\n        this.fetchRender();\r\n    },\r\n\r\n    fetchRender () {\r\n        let sprite = this.getComponent(cc.Sprite);\r\n        if (sprite) {\r\n            this.sprite = sprite;\r\n            this.updateSprite(window.i18n.curLang);\r\n            return;\r\n        }\r\n    },\r\n\r\n    getSpriteFrameByLang (lang) {\r\n        for (let i = 0; i < this.spriteFrameSet.length; ++i) {\r\n            if (this.spriteFrameSet[i].language === lang) {\r\n                return this.spriteFrameSet[i].spriteFrame;\r\n            }\r\n        }\r\n    },\r\n\r\n    updateSprite (language) {\r\n        if (!this.sprite) {\r\n            cc.error('Failed to update localized sprite, sprite component is invalid!');\r\n            return;\r\n        }\r\n\r\n        let spriteFrame = this.getSpriteFrameByLang(language);\r\n\r\n        if (!spriteFrame && this.spriteFrameSet[0]) {\r\n            spriteFrame = this.spriteFrameSet[0].spriteFrame;\r\n        }\r\n\r\n        this.sprite.spriteFrame = spriteFrame;\r\n    }\r\n});"]}