{"version":3,"sources":["GameApplication.js"],"names":["SoundManager","require","cc","Class","extends","Component","properties","soundManager","default","type","missions","missionsCB","conf","confCB","createShortcuted","Integer","effectView","Node","StepView","visible","StepView_prefab","Prefab","HeartView","HeartView_prefab","CoinView","CoinView_prefab","SharaView","SharaView_prefab","fbView_prefab","_playTimes","playTimes","get","set","val","SDK","plusPlayTimes","uiAtlas","SpriteAtlas","rewardList","lerpACtion","start","disVal","time","callback","agent","stopAllActions","ob","x","repeatTime","repeatVal","runAction","repeat","sequence","callFunc","bind","moveBy","v2","getItem","idx","setLanguage","window","nameArr","init","getConf","path","cb","loader","loadRes","err","results","onLoad","gameApplication","manager","director","getCollisionManager","enabled","enabledDebugDraw","enabledDrawBoundingBox","invokeMissionCB","openMainView","curShowIdx","onDestroy","language","i18n","getMissions","length","push","self","forEach","setNodeActive","nodePath","active","isPop","view","find","name","top","goGame","moveTo","Bg","scale","scaleTo","easing","easeBounceOut","opacity","fadeIn","winSize","height","easeSineIn","fadeOut","isReward","mainScirpt","refreashVal","scheduleOnce","flyReward","starts","openRankView","openGameView","openPopView","viewName","isOpen","openGiftView","openSetting","settingClick","event","showVideoView","isCount","VideoView","instantiate","VideoView_prefab","Canvas","parent","width","setSiblingIndex","childrenCount","getChildByName","light","repeatForever","rotateBy","sureBtn","sureText","getComponent","Label","off","EventType","TOUCH_END","viewCount","checkDailyCount","Button","interactable","string","on","playSound","onVideoBtnClick","isCompleted","laterBtn","showCoinView","showHeartView","sureBtn1","sureText1","viewCount1","onShareBtnClick","showStepView","coin","setItem","coins","showVideoAd","console","log","fbFail","key","isAdd","myDate","Date","month","getMonth","day","getDate","parseInt","param","onGiftBtnClick","showInterstitialAd","showSharaView","score","share","audioSource","play","loop","btn","fbView","destroy","popClick","switchGameAsync","shake","node","rotateTo","easeIn","delayTime","scaleUpAndDowm","num","target","begin","convertToWorldSpaceAR","position","convertToNodeSpaceAR","dis","i","reward","pop","sprite","Sprite","addComponent","spriteFrame","getSpriteFrame","flyAnim","spawn","y"],"mappings":"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","file":"GameApplication.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\GameLogic","sourcesContent":["import { SIGPROF } from \"constants\";\r\nvar SoundManager = require(\"../GameLogic/SoundManager\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        soundManager: {\r\n            default: null,\r\n            type: SoundManager,\r\n        },\r\n        missions: {\r\n            default: []\r\n        },\r\n        missionsCB: {\r\n            default: []\r\n        },\r\n        conf: {\r\n            default: {},\r\n        },\r\n        confCB: {\r\n            default: []\r\n        },\r\n        createShortcuted: {\r\n            default: 0,\r\n            type: cc.Integer,\r\n        },\r\n        effectView: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        StepView: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false,\r\n        },\r\n        StepView_prefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        HeartView: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false,\r\n        },\r\n        HeartView_prefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        CoinView: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false,\r\n        },\r\n        CoinView_prefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        SharaView: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false,\r\n        },\r\n        SharaView_prefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        fbView_prefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        _playTimes: {\r\n            default: 0,\r\n            type: cc.Integer,\r\n        },\r\n        playTimes: {\r\n            get: function () {\r\n                return this._playTimes;\r\n            },\r\n            set: function (val) {\r\n                this._playTimes = val;\r\n\r\n                SDK().plusPlayTimes();\r\n            },\r\n        },\r\n        uiAtlas: {\r\n            default: null,\r\n            type: cc.SpriteAtlas,\r\n        },\r\n        rewardList:{\r\n            default: [],\r\n            type: [cc.Node],\r\n            visible: false,\r\n        },\r\n    },\r\n\r\n\r\n    //起始值，位移量，时间，回调\r\n    lerpACtion(start, disVal, time, callback) {\r\n        if (this.agent == null) {\r\n            this.agent = new cc.Node(\"agent\");\r\n        }\r\n        this.agent.stopAllActions();\r\n        let ob = this.agent;\r\n        if (start != null) {\r\n            ob.x = start;\r\n        }\r\n        let repeatTime = time / 0.02;\r\n        let repeatVal = disVal / repeatTime;\r\n        ob.runAction(cc.repeat(\r\n            cc.sequence(\r\n                cc.callFunc(function () {\r\n                    callback(ob);\r\n                }.bind(this), this),\r\n                cc.moveBy(0.02, cc.v2(repeatVal, 0)),\r\n            )\r\n            , repeatTime + 1));\r\n    },\r\n\r\n\r\n    start() {\r\n        SDK().getItem(\"curLang\", function (idx) {\r\n            if (idx == null) {\r\n                idx = 0;\r\n            }\r\n            this.setLanguage(window.nameArr[idx]);\r\n        }.bind(this))\r\n        SDK().init();\r\n    },\r\n\r\n    getConf(path, cb) {\r\n\r\n        if (this.conf[path] != null) {\r\n            if (cb) {\r\n                // cc.log(\"从cache读取：\"+path)\r\n                cb(this.conf[path]);\r\n            }\r\n        } else {\r\n            // cc.log(\"从硬盘读取：\"+path)\r\n            cc.loader.loadRes(path, function (err, results) {\r\n                this.conf[path] = results;\r\n                if (cb != null) {\r\n                    cb(results)\r\n                }\r\n            }.bind(this));\r\n        }\r\n    },\r\n\r\n\r\n    onLoad() {\r\n        window.gameApplication = this;\r\n        var manager = cc.director.getCollisionManager();\r\n        manager.enabled = true;\r\n        manager.enabledDebugDraw = false;\r\n        manager.enabledDrawBoundingBox = false;\r\n\r\n        //Load Json\r\n        cc.loader.loadRes(\"conf/missions\", function (err, results) {\r\n            this.missions = results;\r\n            this.invokeMissionCB();\r\n        }.bind(this));\r\n\r\n        this.openMainView();\r\n        //cc.game.addPersistRootNode(this.node);\r\n        this.curShowIdx = 0;\r\n    },\r\n\r\n    onDestroy() {\r\n        cc.director.getCollisionManager().enabled = false;\r\n    },\r\n\r\n    setLanguage(language) {\r\n        const i18n = require('LanguageData');\r\n        i18n.init(language);\r\n    },\r\n\r\n    getMissions(cb) {\r\n\r\n        if (this.missions != null && this.missions.length > 0) {\r\n            cb(this.missions);\r\n        } else {\r\n            this.missionsCB.push(cb);\r\n        }\r\n    },\r\n\r\n    invokeMissionCB() {\r\n        var self = this;\r\n        if (this.missionsCB.length > 0) {\r\n            this.missionsCB.forEach(function (cb) {\r\n                if (cb != null) {\r\n                    cb(self.missions);\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    setNodeActive(nodePath, active, isPop) {\r\n        var view = cc.find(\"Canvas/\" + nodePath);\r\n        if (view != null) {\r\n            if (active) {\r\n                view.active = active;\r\n                if (view.name == \"MainView\" || view.name == \"GameView\") {\r\n                    var top = cc.find(\"top\", view)\r\n                    if (top != null) {\r\n                        top.active = true;\r\n                    }\r\n                    var goGame = cc.find(\"GoGame\", view)\r\n                    if (goGame != null) {\r\n                        goGame.active = false;\r\n                    }\r\n                    view.runAction(cc.moveTo(0.5, cc.v2(0, 0)));\r\n                }\r\n                if (isPop) {\r\n                    var Bg = cc.find(\"Bg\", view);\r\n                    Bg.scale = 0;\r\n                    Bg.runAction(\r\n                        /* cc.sequence( */\r\n                        cc.scaleTo(0.5, 1).easing(cc.easeBounceOut(2)),\r\n                        /*     cc.callFunc(function () {\r\n                                view.active = false;\r\n                            }.bind(this), this) \r\n                        )*/\r\n                    )\r\n                } else {\r\n                    view.opacity = 0;\r\n                    view.runAction(cc.fadeIn(0.5));\r\n                }\r\n            } else {\r\n                if (view.name == \"MainView\") {\r\n                    var top = cc.find(\"top\", view)\r\n                    if (top != null) {\r\n                        top.active = false;\r\n                    }\r\n                    view.runAction(cc.sequence(\r\n                        cc.moveTo(0.5, cc.v2(0, -cc.winSize.height)),\r\n                        cc.callFunc(function () {\r\n                            view.active = true;\r\n                        }.bind(this), this)\r\n                    ));\r\n                } else if (view.name == \"GameView\") {\r\n                    view.runAction(cc.sequence(\r\n                        cc.moveTo(0.5, cc.v2(0, cc.winSize.height)),\r\n                        cc.callFunc(function () {\r\n                            view.active = active;\r\n                        }.bind(this), this)\r\n                    ));\r\n                }\r\n                if (isPop) {\r\n                    var Bg = cc.find(\"Bg\", view);\r\n                    Bg.runAction(\r\n                        cc.sequence(\r\n                            cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                            cc.callFunc(function () {\r\n                                view.active = false;\r\n                            }.bind(this), this)\r\n                        )\r\n                    )\r\n                } else {\r\n                    view.runAction(cc.fadeOut(0.5));\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    openMainView: function (isReward) {\r\n        if (window.mainScirpt != null) {\r\n            window.mainScirpt.refreashVal();\r\n            if(isReward){\r\n                this.scheduleOnce(function(){\r\n                    window.gameApplication.flyReward(1, \"starBig\", window.mainScirpt.starts, null);\r\n                }.bind(this),1)\r\n            }\r\n        }\r\n        this.setNodeActive(\"MainView\", true);\r\n        this.setNodeActive(\"GameView\", false);\r\n        this.openRankView(false);\r\n    },\r\n\r\n    openGameView: function () {\r\n        this.setNodeActive(\"GameView\", true);\r\n        this.setNodeActive(\"MainView\", false);\r\n        this.openRankView(false);\r\n    },\r\n\r\n    openPopView: function (viewName, isOpen) {\r\n        this.setNodeActive(viewName, isOpen, true);\r\n    },\r\n\r\n    openRankView: function (isOpen) {\r\n        this.openPopView(\"RankView\", isOpen);\r\n    },\r\n\r\n    openGiftView: function (isOpen) {\r\n        this.openPopView(\"GiftView\", isOpen);\r\n    },\r\n\r\n    openSetting: function (isOpen) {\r\n        this.openPopView(\"SettingView\", isOpen);\r\n    },\r\n\r\n\r\n    //设置界面\r\n    settingClick(event, type) {\r\n        if (type == \"1\") {\r\n            this.openSetting(true);\r\n        } else if (type == \"2\") {\r\n            this.openSetting(false);\r\n        }\r\n    },\r\n\r\n    //显示是否观看视频的提示框\r\n    showVideoView(cb, isCount) {\r\n        if (this.VideoView == null) {\r\n            var view = cc.instantiate(this.VideoView_prefab);\r\n            var Canvas = cc.find(\"Canvas\");\r\n            view.parent = Canvas;\r\n            view.width = window.width;\r\n            view.height = window.height;\r\n            this.VideoView = view;\r\n        }\r\n        this.VideoView.active = true;\r\n        this.VideoView.setSiblingIndex(this.VideoView.parent.childrenCount);\r\n\r\n        //弹出动画\r\n        let Bg = this.VideoView.getChildByName(\"Bg\");\r\n        Bg.scale = 0;\r\n        Bg.runAction(cc.scaleTo(0.5, 1).easing(cc.easeBounceOut(2)));\r\n\r\n        //旋转光\r\n        let light = this.VideoView.getChildByName(\"Bg\").getChildByName(\"Light\");\r\n        light.stopAllActions();\r\n        light.runAction(cc.repeatForever(\r\n                cc.rotateBy(1.1, 100),\r\n        ));\r\n\r\n        let sureBtn = this.VideoView.getChildByName(\"Bg\").getChildByName(\"Sure\");\r\n        let sureText = sureBtn.getChildByName(\"Text\").getComponent(cc.Label);\r\n        sureBtn.off(cc.Node.EventType.TOUCH_END);\r\n\r\n        let viewCount = 0;\r\n        this.checkDailyCount(\"video\", false, function (val) {\r\n            viewCount = 5 - val;\r\n            if (viewCount > 0) {\r\n                sureBtn.getComponent(cc.Button).interactable = true;\r\n            } else {\r\n                sureBtn.getComponent(cc.Button).interactable = false;\r\n            }\r\n            if (isCount) {\r\n                sureText.string = \"FREE(\" + viewCount + \")\";\r\n            } else {\r\n                sureText.string = \"FREE\";\r\n                sureBtn.getComponent(cc.Button).interactable = true;\r\n            }\r\n            sureBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n                if (viewCount > 0 || !isCount) {\r\n                    window.gameApplication.soundManager.playSound(\"btn_click\");\r\n                    this.onVideoBtnClick(function (isCompleted) {\r\n                        cb(isCompleted)\r\n                        this.VideoView.active = !isCompleted;\r\n                    }.bind(this), isCount);\r\n                }\r\n            }, this);\r\n        }.bind(this));\r\n\r\n        //按钮设置\r\n        var laterBtn = this.VideoView.getChildByName(\"Bg\").getChildByName(\"Later\");\r\n        laterBtn.off(cc.Node.EventType.TOUCH_END);\r\n        laterBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n            cb(false);\r\n            this.VideoView.active = false;\r\n        }, this);\r\n    },\r\n\r\n    //显示是否观看视频的提示框\r\n    showCoinView(cb, isCount) {\r\n        if (this.CoinView == null) {\r\n            var view = cc.instantiate(this.CoinView_prefab);\r\n            var Canvas = cc.find(\"Canvas\");\r\n            view.parent = Canvas;\r\n            view.width = window.width;\r\n            view.height = window.height;\r\n            this.CoinView = view;\r\n        }\r\n        this.CoinView.active = true;\r\n        this.CoinView.setSiblingIndex(this.CoinView.parent.childrenCount);\r\n\r\n        //弹出动画\r\n        let Bg = this.CoinView.getChildByName(\"Bg\");\r\n        Bg.scale = 0;\r\n        Bg.runAction(cc.scaleTo(0.5, 1).easing(cc.easeBounceOut(2)));\r\n\r\n        //旋转光\r\n        let light = this.CoinView.getChildByName(\"Bg\").getChildByName(\"Bg\").getChildByName(\"Light\");\r\n        light.stopAllActions();\r\n        light.runAction(cc.repeatForever(\r\n                cc.rotateBy(1.1, 100),\r\n        ));\r\n\r\n        //按钮设置\r\n        let sureBtn = this.CoinView.getChildByName(\"Bg\").getChildByName(\"Bg\").getChildByName(\"Sure\");\r\n        let sureText = sureBtn.getChildByName(\"Text\").getComponent(cc.Label);\r\n        sureBtn.off(cc.Node.EventType.TOUCH_END);\r\n\r\n        let viewCount = 0;\r\n        this.checkDailyCount(\"coinVideo\", false, function (val) {\r\n            viewCount = 5 - val;\r\n            if (viewCount > 0) {\r\n                sureBtn.getComponent(cc.Button).interactable = true;\r\n            } else {\r\n                sureBtn.getComponent(cc.Button).interactable = false;\r\n            }\r\n            if (isCount) {\r\n                sureText.string = \"FREE(\" + viewCount + \")\";\r\n            } else {\r\n                sureText.string = \"FREE\";\r\n                sureBtn.getComponent(cc.Button).interactable = true;\r\n            }\r\n            sureBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n                if (viewCount > 0 || !isCount) {\r\n                    window.gameApplication.soundManager.playSound(\"btn_click\");\r\n                    this.onVideoBtnClick(function (isCompleted) {\r\n                        if (isCompleted) {\r\n                            Bg.runAction(\r\n                                cc.sequence(\r\n                                    cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                                    cc.callFunc(function () {\r\n                                        this.CoinView.active = false;\r\n                                    }.bind(this), this)\r\n                                )\r\n                            )\r\n                        }\r\n                        cb(isCompleted)\r\n                    }.bind(this), isCount);\r\n                }\r\n            }, this);\r\n        }.bind(this));\r\n\r\n        var laterBtn = this.CoinView.getChildByName(\"Bg\").getChildByName(\"Later\");\r\n        laterBtn.off(cc.Node.EventType.TOUCH_END);\r\n        laterBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n            cb(false);\r\n            Bg.runAction(\r\n                cc.sequence(\r\n                    cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                    cc.callFunc(function () {\r\n                        this.CoinView.active = false;\r\n                    }.bind(this), this)\r\n                )\r\n            )\r\n        }, this);\r\n    },\r\n\r\n    //显示获取体力的提示框\r\n    showHeartView(cb, isCount) {\r\n        if (this.HeartView == null) {\r\n            var view = cc.instantiate(this.HeartView_prefab);\r\n            var Canvas = cc.find(\"Canvas\");\r\n            view.parent = Canvas;\r\n            view.width = window.width;\r\n            view.height = window.height;\r\n            this.HeartView = view;\r\n        }\r\n        this.HeartView.active = true;\r\n        this.HeartView.setSiblingIndex(this.HeartView.parent.childrenCount);\r\n\r\n        //弹出动画\r\n        let Bg = this.HeartView.getChildByName(\"Bg\");\r\n        Bg.scale = 0;\r\n        Bg.runAction(cc.scaleTo(0.5, 1).easing(cc.easeBounceOut(2)));\r\n\r\n        //旋转光\r\n        let light = this.HeartView.getChildByName(\"Bg\").getChildByName(\"Bg\").getChildByName(\"Light\");\r\n        light.stopAllActions();\r\n        light.runAction(cc.repeatForever(\r\n                cc.rotateBy(1.1, 100),\r\n        ));\r\n\r\n        //按钮设置\r\n        let sureBtn = this.HeartView.getChildByName(\"Bg\").getChildByName(\"Bg\").getChildByName(\"Video\");\r\n        let sureText = sureBtn.getChildByName(\"Text\").getComponent(cc.Label);\r\n        sureBtn.off(cc.Node.EventType.TOUCH_END);\r\n\r\n        let viewCount = 0;\r\n        this.checkDailyCount(\"heartVideo\", false, function (val) {\r\n            viewCount = 5 - val;\r\n            if (viewCount > 0) {\r\n                sureBtn.getComponent(cc.Button).interactable = true;\r\n            } else {\r\n                sureBtn.getComponent(cc.Button).interactable = false;\r\n            }\r\n            if (isCount) {\r\n                sureText.string = \"FREE(\" + viewCount + \")\";\r\n            } else {\r\n                sureText.string = \"FREE\";\r\n                sureBtn.getComponent(cc.Button).interactable = true;\r\n            }\r\n            sureBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n                if (viewCount > 0 || !isCount) {\r\n                    window.gameApplication.soundManager.playSound(\"btn_click\");\r\n                    this.onVideoBtnClick(function (isCompleted) {\r\n                        if (isCompleted) {\r\n                            Bg.runAction(\r\n                                cc.sequence(\r\n                                    cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                                    cc.callFunc(function () {\r\n                                        this.HeartView.active = false;\r\n                                    }.bind(this), this)\r\n                                )\r\n                            )\r\n                        }\r\n                        cb(isCompleted)\r\n                    }.bind(this), isCount);\r\n                }\r\n            }, this);\r\n        }.bind(this));\r\n\r\n        let sureBtn1 = this.HeartView.getChildByName(\"Bg\").getChildByName(\"Bg\").getChildByName(\"Share\");\r\n        let sureText1 = sureBtn1.getChildByName(\"Text\").getComponent(cc.Label);\r\n        sureBtn1.off(cc.Node.EventType.TOUCH_END);\r\n\r\n        let viewCount1 = 0;\r\n        this.checkDailyCount(\"heartShare\", false, function (val) {\r\n            viewCount1 = 5 - val;\r\n            if (viewCount1 > 0) {\r\n                sureBtn1.getComponent(cc.Button).interactable = true;\r\n            } else {\r\n                sureBtn1.getComponent(cc.Button).interactable = false;\r\n            }\r\n            if (isCount) {\r\n                sureText1.string = \"FREE(\" + viewCount1 + \")\";\r\n            } else {\r\n                sureText1.string = \"FREE\";\r\n                sureBtn1.getComponent(cc.Button).interactable = true;\r\n            }\r\n            sureBtn1.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n                if (viewCount1 > 0 || !isCount) {\r\n                    window.gameApplication.soundManager.playSound(\"btn_click\");\r\n                    this.onShareBtnClick(function (isCompleted) {\r\n                        if (isCompleted) {\r\n                            Bg.runAction(\r\n                                cc.sequence(\r\n                                    cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                                    cc.callFunc(function () {\r\n                                        this.HeartView.active = false;\r\n                                    }.bind(this), this)\r\n                                )\r\n                            )\r\n                        }\r\n                        cb(isCompleted)\r\n                    }.bind(this), isCount);\r\n                }\r\n            }, this);\r\n        }.bind(this));\r\n\r\n        var laterBtn = this.HeartView.getChildByName(\"Bg\").getChildByName(\"Later\");\r\n        laterBtn.off(cc.Node.EventType.TOUCH_END);\r\n        laterBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n            cb(false);\r\n            Bg.runAction(\r\n                cc.sequence(\r\n                    cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                    cc.callFunc(function () {\r\n                        this.HeartView.active = false;\r\n                    }.bind(this), this)\r\n                )\r\n            )\r\n        }, this);\r\n    },\r\n\r\n    //显示获取体力的提示框\r\n    showStepView(cb, isCount) {\r\n        if (this.StepView == null) {\r\n            var view = cc.instantiate(this.StepView_prefab);\r\n            var Canvas = cc.find(\"Canvas\");\r\n            view.parent = Canvas;\r\n            view.width = window.width;\r\n            view.height = window.height;\r\n            this.StepView = view;\r\n        }\r\n        this.StepView.active = true;\r\n        this.StepView.setSiblingIndex(this.StepView.parent.childrenCount);\r\n\r\n        //弹出动画\r\n        let Bg = this.StepView.getChildByName(\"Bg\");\r\n        Bg.scale = 0;\r\n        Bg.runAction(cc.scaleTo(0.5, 1).easing(cc.easeBounceOut(2)));\r\n\r\n        //按钮设置\r\n        let sureBtn = this.StepView.getChildByName(\"Bg\").getChildByName(\"Bg\").getChildByName(\"Video\");\r\n        sureBtn.off(cc.Node.EventType.TOUCH_END);\r\n\r\n        sureBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n            this.onVideoBtnClick(function (isCompleted) {\r\n                if (isCompleted) {\r\n                    Bg.runAction(\r\n                        cc.sequence(\r\n                            cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                            cc.callFunc(function () {\r\n                                this.StepView.active = false;\r\n                            }.bind(this), this)\r\n                        )\r\n                    )\r\n                }\r\n                cb(isCompleted)\r\n            }.bind(this), isCount);\r\n        }, this);\r\n\r\n        let sureBtn1 = this.StepView.getChildByName(\"Bg\").getChildByName(\"Bg\").getChildByName(\"Coin\");\r\n        sureBtn1.off(cc.Node.EventType.TOUCH_END);\r\n\r\n        sureBtn1.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n            SDK().getItem(\"coins\", function (coin) {\r\n                if (coin >= 100) {\r\n                    coin = coin - 100;\r\n                    SDK().setItem({ coins: coin })\r\n                    cb(true);\r\n                    Bg.runAction(\r\n                        cc.sequence(\r\n                            cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                            cc.callFunc(function () {\r\n                                this.StepView.active = false;\r\n                            }.bind(this), this)\r\n                        )\r\n                    )\r\n                } else {\r\n                    window.gameApplication.showCoinView(function (isCompleted) {\r\n                        if (isCompleted) {\r\n                            Bg.runAction(\r\n                                cc.sequence(\r\n                                    cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                                    cc.callFunc(function () {\r\n                                        this.StepView.active = false;\r\n                                    }.bind(this), this)\r\n                                )\r\n                            )\r\n                        }\r\n                        cb(isCompleted);\r\n                    }.bind(this), false)\r\n                }\r\n            }.bind(this))\r\n        }, this);\r\n\r\n        var laterBtn = this.StepView.getChildByName(\"Bg\").getChildByName(\"Later\");\r\n        laterBtn.off(cc.Node.EventType.TOUCH_END);\r\n        laterBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n            cb(false);\r\n            Bg.runAction(\r\n                cc.sequence(\r\n                    cc.scaleTo(0.3, 0).easing(cc.easeSineIn(2)),\r\n                    cc.callFunc(function () {\r\n                        this.StepView.active = false;\r\n                    }.bind(this), this)\r\n                )\r\n            )\r\n        }, this);\r\n    },\r\n\r\n    //视频奖励\r\n    onVideoBtnClick(cb, isCount) {\r\n        SDK().showVideoAd(\r\n            function (isCompleted) {\r\n                if (null == isCompleted) {\r\n                    console.log(\"没有观看成功\")\r\n                    this.fbFail(1);\r\n                    if (cb != null) {\r\n                        cb(false);\r\n                    }\r\n                } else if (isCompleted) {\r\n                    if (cb != null) {\r\n                        cb(true);\r\n                    }\r\n                    if (isCount) {\r\n                        this.checkDailyCount(\"video\", true);\r\n                    }\r\n                } else {\r\n                    console.log(\"没有观看成功\")\r\n                    this.fbFail(1);\r\n                    if (cb != null) {\r\n                        cb(false);\r\n                    }\r\n                }\r\n            }.bind(this)\r\n        );\r\n    },\r\n\r\n    //检查日常次数限制\r\n    checkDailyCount(key, isAdd, cb) {\r\n        var myDate = new Date();\r\n        let month = myDate.getMonth();       //获取当前月份(0-11,0代表1月)\r\n        let day = myDate.getDate();        //获取当前日(1-31)\r\n        SDK().getItem(month + \"_\" + day + \"_\" + key, function (val) {\r\n            if (val == null) {\r\n                val = 0;\r\n            }\r\n            val = parseInt(val);\r\n            if (isAdd) {\r\n                val = val + 1\r\n                var param = {};\r\n                param[month + \"_\" + day + \"_\" + key] = val;\r\n                SDK().setItem(param);\r\n            }\r\n            if (cb != null) {\r\n                cb(val);\r\n            }\r\n        })\r\n    },\r\n\r\n    //插屏广告按钮\r\n    onGiftBtnClick(cb) {\r\n        SDK().showInterstitialAd(\r\n            function (isCompleted) {\r\n                if (null == isCompleted) {\r\n                    console.log(\"没有观看成功\")\r\n                    this.fbFail(1);\r\n                } else if (isCompleted) {\r\n                    cb(true);\r\n                } else {\r\n                    console.log(\"没有观看成功\")\r\n                    this.fbFail(1);\r\n                }\r\n            }.bind(this)\r\n            , true);\r\n    },\r\n\r\n    //显示是否分享的提示框\r\n    showSharaView(cb) {\r\n        if (this.SharaView == null) {\r\n            var view = cc.instantiate(this.SharaView_prefab);\r\n            var Canvas = cc.find(\"Canvas\");\r\n            view.parent = Canvas;\r\n            view.width = window.width;\r\n            view.height = window.height;\r\n            this.SharaView = view;\r\n        }\r\n        this.SharaView.active = true;\r\n        let sureBtn = this.SharaView.getChildByName(\"Bg\").getChildByName(\"Sure\");\r\n        sureBtn.off(cc.Node.EventType.TOUCH_END);\r\n        sureBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            this.onShareBtnClick(function (isCompleted) {\r\n                cb(isCompleted)\r\n                if (isCompleted) {\r\n                    this.SharaView.active = false;\r\n                }\r\n            }.bind(this));\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n        }, this);\r\n\r\n        var laterBtn = this.SharaView.getChildByName(\"Bg\").getChildByName(\"Later\");\r\n        laterBtn.off(cc.Node.EventType.TOUCH_END);\r\n        laterBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            this.SharaView.active = false;\r\n            window.gameApplication.soundManager.playSound(\"btn_click\");\r\n        }, this);\r\n    },\r\n\r\n    //分享按钮\r\n    onShareBtnClick(cb) {\r\n        SDK().getItem(\"all\", function (score) {\r\n            SDK().share(score, function (isCompleted) {\r\n                if (isCompleted) {//分享激励\r\n                    console.log(\"share:\" + score);\r\n                    if (cb != null) {\r\n                        cb(true)\r\n                    }\r\n                } else {\r\n                    this.fbFail(2);\r\n                }\r\n                this.soundManager.audioSource.play();\r\n                this.soundManager.audioSource.loop = true;\r\n            }.bind(this));\r\n        }.bind(this))\r\n    },\r\n\r\n    //FB失败界面\r\n    fbFail(type) {\r\n        var view = cc.instantiate(this.fbView_prefab);\r\n        var Canvas = cc.find(\"Canvas\");\r\n        view.parent = Canvas;\r\n        view.width = window.width;\r\n        view.height = window.height;\r\n        var btn = view.getChildByName(\"Okay\");\r\n        btn.off(cc.Node.EventType.TOUCH_END);\r\n        btn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            this.fbView.active = false;\r\n            btn.parent.destroy();\r\n            window.gameApplication.soundManager.playSound(\"button\");\r\n        }, this);\r\n        this.fbView = view;\r\n        if (type == 1) {\r\n            this.fbView.getChildByName(\"Bg\").getChildByName(\"VideoText\").active = true;\r\n            this.fbView.getChildByName(\"Bg\").getChildByName(\"ShareText\").active = false;\r\n        } else {\r\n            this.fbView.getChildByName(\"Bg\").getChildByName(\"VideoText\").active = false;\r\n            this.fbView.getChildByName(\"Bg\").getChildByName(\"ShareText\").active = true;\r\n        }\r\n        this.fbView.active = true;\r\n\r\n    },\r\n\r\n    //互推按钮事件\r\n    popClick(event, type) {\r\n        SDK().switchGameAsync(type);\r\n    },\r\n\r\n    shake(node) {\r\n        node.runAction(cc.repeatForever(cc.sequence(\r\n            cc.rotateTo(0.1, 5).easing(cc.easeIn(2)),\r\n            cc.rotateTo(0.2, -5).easing(cc.easeIn(2)),\r\n            cc.rotateTo(0.2, 5).easing(cc.easeIn(2)),\r\n            cc.rotateTo(0.1, 0).easing(cc.easeIn(2)),\r\n            cc.delayTime(0.5)\r\n        )));\r\n    },\r\n\r\n\r\n    scaleUpAndDowm(node) {\r\n        node.runAction(\r\n            cc.repeatForever(\r\n                cc.sequence(\r\n                    cc.scaleTo(0.3, 1.1).easing(cc.easeIn(2)),\r\n                    cc.scaleTo(0.6, 0.9).easing(cc.easeIn(2)),\r\n                    cc.scaleTo(0.6, 1.1).easing(cc.easeIn(2)),\r\n                    cc.scaleTo(0.6, 0.9).easing(cc.easeIn(2)),\r\n                )\r\n            )\r\n        );\r\n    },\r\n\r\n    //特效动画\r\n    flyReward(num, name, target, start, cb) {\r\n        window.gameApplication.soundManager.playSound(\"getCoin\");\r\n        //起点\r\n        let begin;\r\n        if (start != null) {\r\n            begin = start.parent.convertToWorldSpaceAR(start.position);\r\n            begin = this.effectView.convertToNodeSpaceAR(begin);\r\n        } else {\r\n            begin = cc.v2(0, 0);\r\n        }\r\n        //终点\r\n        let dis = target.parent.convertToWorldSpaceAR(target.position);\r\n        dis = this.effectView.convertToNodeSpaceAR(dis);\r\n        for (var i = 0; i < num; i++) {\r\n            var reward = this.rewardList.pop();\r\n            if(reward == null){\r\n                reward = new cc.Node(i);\r\n            }\r\n            var sprite = reward.getComponent(cc.Sprite);\r\n            if(sprite == null){\r\n                sprite = reward.addComponent(cc.Sprite);\r\n            }\r\n            reward.parent = this.effectView;\r\n            reward.position = begin;\r\n            sprite.spriteFrame = this.uiAtlas.getSpriteFrame(name);\r\n            this.flyAnim(reward,dis,cb,i);\r\n        }\r\n    },\r\n\r\n    flyAnim(reward,dis,cb,i){\r\n        reward.scale = 0;\r\n        this.scheduleOnce(function(){\r\n            reward.runAction(\r\n                cc.spawn(\r\n                    cc.moveTo(0.8, cc.v2(dis.x, dis.y)),\r\n                    cc.sequence(\r\n                        cc.scaleTo(0.4, 1.1),\r\n                        cc.scaleTo(0.4, 0),\r\n                        //用于只执行一次的\r\n                        cc.callFunc(function () {\r\n                            if (cb != null) {\r\n                                cb()\r\n                            }\r\n                            this.rewardList.push(reward);\r\n                        }.bind(this), this)\r\n                    )\r\n                )\r\n            );\r\n        }.bind(this),i*0.1);\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}