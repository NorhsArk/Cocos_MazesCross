{"version":3,"sources":["SettingView.js"],"names":["cc","Class","extends","Component","properties","selectView","default","type","ScrollView","curLang","Label","musicSprite","Sprite","selectContent","Node","selectItem","musicOn","SpriteFrame","musicOff","onLoad","initToggle","SDK","getItem","idx","i","window","langArr","length","newItem","instantiate","tag","parent","toggle","getComponent","Toggle","isChecked","string","name","find","on","languageSelect","active","bind","event","item","target","setItem","director","loadScene","menuClick","gameApplication","soundManager","isOpen","spriteFrame","setIsOpen","Math","abs","node","height","lerpACtion","ob","x","start"],"mappings":"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","file":"SettingView.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI","sourcesContent":["import { isNull } from \"util\";\r\n\r\n// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        selectView: {\r\n            default: null,\r\n            type: cc.ScrollView,\r\n        },\r\n        curLang: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        musicSprite: {\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n        selectContent: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        selectItem: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        musicOn: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n        },\r\n        musicOff: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.initToggle();\r\n    },\r\n\r\n    initToggle() {\r\n        SDK().getItem(\"curLang\", function (idx) {\r\n            if (idx == null) {\r\n                idx = 0;\r\n            }\r\n            for (var i = 0; i < window.langArr.length; i = i + 1) {\r\n                var newItem = cc.instantiate(this.selectItem);\r\n                newItem.tag = i;\r\n                newItem.parent = this.selectContent;\r\n                //初始化状态\r\n                newItem.toggle = newItem.getComponent(cc.Toggle);\r\n                if (i != idx) {\r\n                    newItem.toggle.isChecked = false;\r\n                } else {\r\n                    newItem.toggle.isChecked = true;\r\n                    this.curLang.string = window.langArr[i];\r\n                }\r\n                //初始化名字\r\n                var name = cc.find(\"Name\", newItem).getComponent(cc.Label);\r\n                name.string = window.langArr[i];\r\n                //初始化处理事件\r\n                newItem.on('toggle', this.languageSelect, this);\r\n\r\n                newItem.active = true;\r\n            }\r\n        }.bind(this))\r\n    },\r\n\r\n    languageSelect(event) {\r\n        var item = event.target;\r\n        if (item.toggle.isChecked) {\r\n            this.curLang.string = window.langArr[item.tag];\r\n            SDK().setItem({ curLang: item.tag },function(){\r\n                cc.director.loadScene(\"loadLanguage\");\r\n            }.bind(this));\r\n        }\r\n    },\r\n\r\n    menuClick(event, type) {\r\n        if (type == \"music\") {\r\n            if (window.gameApplication.soundManager.isOpen) {\r\n                this.musicSprite.spriteFrame = this.musicOff;\r\n                window.gameApplication.soundManager.setIsOpen(false);\r\n            } else {\r\n                this.musicSprite.spriteFrame = this.musicOn;\r\n                window.gameApplication.soundManager.setIsOpen(true);\r\n            }\r\n        } else if (type == \"select\") {\r\n            var length = 400;\r\n            if (Math.abs(this.selectView.node.height - length) < 0.01) {\r\n                window.gameApplication.lerpACtion(length, -length, 0.5, function (ob) {\r\n                    this.selectView.node.height = ob.x;\r\n                    if (Math.abs(this.selectView.node.height - 0) < 1) {\r\n                        this.selectView.node.height = 0;\r\n                    }\r\n                }.bind(this))\r\n            } else if (Math.abs(this.selectView.node.height - 0) < 0.01) {\r\n                window.gameApplication.lerpACtion(0, length, 0.5, function (ob) {\r\n                    this.selectView.node.height = ob.x;\r\n                    if (Math.abs(this.selectView.node.height - length) < 1) {\r\n                        this.selectView.node.height = length;\r\n                    }\r\n                }.bind(this))\r\n            }\r\n        }\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}