{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\UI/assets\\Script\\UI\\RankView.js"],"names":["cc","Class","extends","Component","properties","worldBtn","default","type","Node","friendBtn","worldList","friendList","worldContent","friendContent","headSpriteList","visible","worldPlayer","friendPlayer","worldUIPlayer","friendUIPlayer","prefab_player","Prefab","onEnable","LoadRank","menuClick","event","window","gameApplication","soundManager","playSound","openRankView","SDK","getFriendsRank","list","GetFriendRank","bind","i","length","playerBar","Head","Name","No","Score","playBtn","instantiate","getChildByName","getComponent","Sprite","Label","parent","active","LoadSprite","headUrl","id","string","name","node","score","getSelfInfo","tag","off","EventType","TOUCH_END","on","playWith","target","isCompleted","getItem","coin","flyReward","mainScirpt","coins","openGameView","setItem","GetWorldRank","isOnRank","LoadRankData","listLength","getRankScore","info","playerData","mainBg","color","no","url","sprite","saver","loader","load","err","texture","SpriteFrame","spriteFrame"],"mappings":"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","file":"RankView.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //榜单界面\r\n        worldBtn: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        friendBtn: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        worldList: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        friendList: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        worldContent: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        friendContent: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        //头像储存\r\n        headSpriteList: {\r\n            default: {},\r\n            visible: false,\r\n        },\r\n        //储存用户信息列表\r\n        worldPlayer: {\r\n            default: [],\r\n            visible: false,\r\n        },\r\n        friendPlayer: {\r\n            default: [],\r\n            visible: false,\r\n        },\r\n        //储存用户UI列表\r\n        worldUIPlayer: {\r\n            default: [],\r\n            visible: false,\r\n        },\r\n        friendUIPlayer: {\r\n            default: [],\r\n            visible: false,\r\n        },\r\n        prefab_player: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    onEnable() {\r\n        this.LoadRank();\r\n    },\r\n\r\n    //按钮点击事件\r\n    menuClick(event, type) {\r\n        window.gameApplication.soundManager.playSound(\"btn_click\");\r\n        if (type == \"openRank\") {\r\n            window.gameApplication.openRankView(true);\r\n        } else if (type == \"closeRank\") {\r\n            window.gameApplication.openRankView(false);\r\n        }\r\n    },\r\n\r\n    //加载榜单\r\n    LoadRank() {\r\n        SDK().getFriendsRank(2, 20, 0, function (list) {\r\n            this.GetFriendRank(list);\r\n        }.bind(this));\r\n        /* SDK().getRank(2, 50, 0, function (list) {\r\n            this.GetWorldRank(list);\r\n        }.bind(this)); */\r\n    },\r\n\r\n    //好友邀请列表\r\n    GetFriendRank(list) {\r\n        this.friendPlayer = list;\r\n        for (var i = 0; i < this.friendPlayer.length; i = i + 1) {\r\n            var playerBar;\r\n            var Head;\r\n            var Name;\r\n            var No;\r\n            var Score;\r\n            var playBtn;\r\n            if (i >= this.friendUIPlayer.length) {\r\n                playerBar = cc.instantiate(this.prefab_player);\r\n                Head = playerBar.getChildByName(\"Head\").getComponent(cc.Sprite);\r\n                Name = playerBar.getChildByName(\"Name\").getComponent(cc.Label);\r\n                No = playerBar.getChildByName(\"No\").getComponent(cc.Label);\r\n                Score = playerBar.getChildByName(\"Score\").getChildByName(\"Num\").getComponent(cc.Label);\r\n                playBtn = playerBar.getChildByName(\"Play\")\r\n                this.friendUIPlayer[i] = {};\r\n                this.friendUIPlayer[i].playerBar = playerBar;\r\n                this.friendUIPlayer[i].Head = Head;\r\n                this.friendUIPlayer[i].Name = Name;\r\n                this.friendUIPlayer[i].No = No;\r\n                this.friendUIPlayer[i].Score = Score;\r\n                this.friendUIPlayer[i].playBtn = playBtn;\r\n            } else {\r\n                playerBar = this.friendUIPlayer[i].playerBar;\r\n                Head = this.friendUIPlayer[i].Head;\r\n                Name = this.friendUIPlayer[i].Name;\r\n                No = this.friendUIPlayer[i].No;\r\n                Score = this.friendUIPlayer[i].Score;\r\n                playBtn = this.friendUIPlayer[i].playBtn;\r\n            }\r\n            playerBar.parent = this.friendContent;\r\n            playerBar.active = false;\r\n            /* //背景色单双数显示\r\n            if (i % 2 == 0) {\r\n                playerBar.color = cc.color(248, 181, 81, 255);\r\n            } else {\r\n                playerBar.color = cc.color(254, 152, 0, 255);\r\n            } */\r\n\r\n            //加载头像\r\n            this.LoadSprite(this.friendPlayer[i].headUrl, Head, this.headSpriteList[this.friendPlayer[i].id]);\r\n            //名字\r\n            Name.string = this.friendPlayer[i].name;\r\n            Name.node.active = true;\r\n            //排名\r\n            No.string = this.friendPlayer[i].No;\r\n            No.node.active = true;\r\n            //分数\r\n            Score.string = this.friendPlayer[i].score\r\n            Score.node.active = true;\r\n\r\n            //是否为自己\r\n            if (this.friendPlayer[i].id == SDK().getSelfInfo().id) {\r\n                playBtn.active = false;\r\n            } else {\r\n                playBtn.active = true;\r\n            }\r\n            //按钮初始化\r\n            playBtn.tag = this.friendPlayer[i].id;\r\n            playBtn.off(cc.Node.EventType.TOUCH_END);\r\n            playBtn.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n                SDK().playWith(event.target.tag, null, function (isCompleted) {\r\n                    if (isCompleted) {\r\n                        SDK().getItem(\"coins\", function (coin) {\r\n                            coin = coin + 20;\r\n                            window.gameApplication.flyReward(2, \"coin\", window.mainScirpt.coins, function () {\r\n                                if (this.node.active) {\r\n                                    window.gameApplication.openGameView(true);\r\n                                }\r\n                                if (window.mainScirpt.coins != null) {\r\n                                    window.mainScirpt.coins.getComponent(cc.Label).string = coin;\r\n                                }\r\n                            }.bind(this));\r\n                            SDK().setItem({ coins: coin });\r\n                        }.bind(this), false)\r\n                    }\r\n                }.bind(this));\r\n            }.bind(this), this);\r\n        }\r\n        if (this.friendPlayer.length < this.friendUIPlayer.length) {\r\n            for (var i = this.friendPlayer.length; i < this.friendUIPlayer.length; i = i + 1) {\r\n                this.friendUIPlayer[i].playerBar.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    //世界排行榜\r\n    GetWorldRank(list) {\r\n        this.worldPlayer = list;\r\n        var isOnRank = false;\r\n        for (var i = 0; i < this.worldPlayer.length; i = i + 1) {\r\n            if (this.LoadRankData(i, this.worldPlayer[i])) {\r\n                isOnRank = true;\r\n            }\r\n        }\r\n        //如果自己不在榜单上就将自己加载最后\r\n        var listLength = this.worldPlayer.length;\r\n        if (!isOnRank) {\r\n            listLength = listLength + 1;\r\n            SDK().getRankScore(2, function (info) {\r\n                this.LoadRankData(listLength - 1, info);\r\n            }.bind(this))\r\n        }\r\n        //隐藏多余的榜单\r\n        if (listLength < this.worldUIPlayer.length) {\r\n            for (var i = this.worldPlayer.length; i < this.worldUIPlayer.length; i = i + 1) {\r\n                this.worldUIPlayer[i].playerBar.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    //将玩家信息加载到第I排\r\n    LoadRankData(i, playerData) {\r\n        var isOnRank = false;\r\n        var playerBar;\r\n        var mainBg;\r\n        var No;\r\n        var Score;\r\n        var Head;\r\n        if (i >= this.worldUIPlayer.length) {\r\n            playerBar = cc.instantiate(this.prefab_player);\r\n            mainBg = playerBar.getComponent(cc.Sprite);\r\n            No = playerBar.getChildByName(\"No\").getComponent(cc.Label);\r\n            Score = playerBar.getChildByName(\"Score\").getChildByName(\"Num\").getComponent(cc.Label);\r\n            Head = playerBar.getChildByName(\"HeadMask\").getChildByName(\"Head\").getComponent(cc.Sprite);\r\n            var Name = playerBar.getChildByName(\"Name\");\r\n            Name.active = false;\r\n            this.worldUIPlayer[i] = {};\r\n            this.worldUIPlayer[i].playerBar = playerBar;\r\n            this.worldUIPlayer[i].mainBg = mainBg;\r\n            this.worldUIPlayer[i].No = No;\r\n            this.worldUIPlayer[i].Score = Score;\r\n            this.worldUIPlayer[i].Head = Head;\r\n        } else {\r\n            playerBar = this.worldUIPlayer[i].playerBar;\r\n            mainBg = this.worldUIPlayer[i].mainBg;\r\n            No = this.worldUIPlayer[i].No;\r\n            Score = this.worldUIPlayer[i].Score;\r\n            Head = this.worldUIPlayer[i].Head;\r\n        }\r\n        //背景色单双数显示\r\n        if (i % 2 == 0) {\r\n            playerBar.color = cc.color(248, 181, 81, 255);\r\n        } else {\r\n            playerBar.color = cc.color(254, 152, 0, 255);\r\n        }\r\n        No.node.active = true;\r\n        Score.node.active = true;\r\n        playerBar.name = playerData.id;\r\n        playerBar.parent = this.worldContent;\r\n        //是否为自己\r\n        if (playerData.id == SDK().getSelfInfo().id) {\r\n            isOnRank = true;\r\n        }\r\n        //隐藏play按钮\r\n        var playBtn = playerBar.getChildByName(\"Play\");\r\n        playBtn.active = false;\r\n        //加载名次\r\n        No.string = playerData.no;\r\n        //加载分数\r\n        Score.string = playerData.score;\r\n        //加载头像\r\n        this.LoadSprite(playerData.headUrl, Head, this.headSpriteList[playerData.id]);\r\n        return isOnRank;\r\n    },\r\n\r\n    //根据URL加载头像并到对应的sprite上\r\n    LoadSprite(url, sprite, saver) {\r\n        if (saver == null) {\r\n            cc.loader.load(url, function (err, texture) {\r\n                saver = new cc.SpriteFrame(texture);\r\n                sprite.spriteFrame = saver;\r\n                sprite.node.parent.active = true;\r\n            });\r\n        } else {\r\n            sprite.spriteFrame = saver;\r\n            sprite.node.parent.active = true;\r\n        }\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}