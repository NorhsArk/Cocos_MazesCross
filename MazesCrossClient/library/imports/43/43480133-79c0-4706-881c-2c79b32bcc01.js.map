{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\Common/assets\\Script\\UI\\Common\\NormalAnimation.js"],"names":["cc","Class","extends","Component","properties","loop","isplay","sprite","default","type","Sprite","sprites","SpriteFrame","fps","Integer","index","visible","delta","rotationForever","onLoad","rotation","seq","repeatForever","rotateBy","rotationSeq","node","runAction","play","scheduleOnce","stopAction","opacity","active","update","dt","length","rate","spriteFrame"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAK,IADG;AAERC,gBAAO,IAFC;AAGRC,gBAAO;AACHC,qBAAQ,IADL;AAEHC,kBAAKT,GAAGU;AAFL,SAHC;AAORC,iBAAQ;AACJH,qBAAQ,EADJ;AAEJC,kBAAK,CAACT,GAAGY,WAAJ;AAFD,SAPA;AAWRC,aAAK;AACDL,qBAAS,CADR;AAEDC,kBAAOT,GAAGc;AAFT,SAXG;AAeRC,eAAO;AACHP,qBAAS,CADN;AAEHC,kBAAOT,GAAGc,OAFP;AAGHE,qBAAQ;AAHL,SAfC;AAoBRC,eAAO;AACHT,qBAAS,CADN;AAEHC,kBAAOT,GAAGc,OAFP;AAGHE,qBAAQ;AAHL,SApBC;AAyBRE,yBAAgB;;AAzBR,KAHP;;AAgCLC,UAhCK,oBAgCK;AACN,YAAG,KAAKD,eAAR,EAAwB;AACpB,iBAAKE,QAAL;AACH;AACJ,KApCI;AAsCLA,YAtCK,sBAsCK;AACN,YAAIC,MAAMrB,GAAGsB,aAAH,CACDtB,GAAGuB,QAAH,CAAY,GAAZ,EAAiB,EAAjB,CADC,CAAV;AAEA,aAAKC,WAAL,GAAmB,KAAKC,IAAL,CAAUC,SAAV,CAAoBL,GAApB,CAAnB;AACH,KA1CI;AA4CLM,QA5CK,kBA6CL;AACI;;AAEA,aAAKC,YAAL,CAAkB,YAAU;AACxB,gBAAG,KAAKJ,WAAL,IAAoB,IAAvB,EAA4B;AACxB,qBAAKC,IAAL,CAAUI,UAAV,CAAqB,KAAKL,WAA1B;AACH;AACJ,SAJD,EAIE,GAJF;;AAMA,aAAKT,KAAL,GAAa,CAAb;AACA,aAAKE,KAAL,GAAa,CAAb;AACA,aAAKX,MAAL,GAAc,IAAd;AACA,aAAKmB,IAAL,CAAUK,OAAV,GAAoB,GAApB;AACA,aAAKvB,MAAL,CAAYkB,IAAZ,CAAiBM,MAAjB,GAA0B,IAA1B;AAEH,KA5DI;AA8DLC,UA9DK,kBA8DGC,EA9DH,EA8DO;AACR,YAAG,KAAK3B,MAAR,EAAe;AACX,iBAAKW,KAAL,IAAcgB,EAAd;AACA,gBAAG,KAAKpB,GAAL,GAAW,CAAX,IAAgB,KAAKF,OAAL,CAAauB,MAAb,GAAsB,CAAzC,EAA2C;AACvC,oBAAIC,OAAO,IAAE,KAAKtB,GAAlB;AACA,oBAAGsB,OAAO,KAAKlB,KAAf,EAAqB;AACjB,yBAAKA,KAAL,GAAakB,OAAO,CAAP,GAAW,KAAKlB,KAAL,GAAakB,IAAxB,GAA+B,CAA5C;AACA,yBAAK5B,MAAL,CAAY6B,WAAZ,GAA0B,KAAKzB,OAAL,CAAa,KAAKI,KAAlB,CAA1B;AACA,yBAAKA,KAAL,GAAa,KAAKA,KAAL,GAAW,CAAX,IAAgB,KAAKJ,OAAL,CAAauB,MAA7B,GAAsC,CAAtC,GAA0C,KAAKnB,KAAL,GAAW,CAAlE;AACA,wBAAG,KAAKA,KAAL,IAAc,CAAd,IAAmB,KAAKV,IAAL,IAAa,KAAnC,EACA;AACI,6BAAKe,QAAL;AACA,6BAAKd,MAAL,GAAc,KAAd;AACA,6BAAKC,MAAL,CAAY6B,WAAZ,GAA0B,KAAKzB,OAAL,CAAa,CAAb,CAA1B;AACA,6BAAKc,IAAL,CAAUK,OAAV,GAAoB,CAApB;AACA;AACH;AACJ;AACJ;AACJ;AACJ;AAlFI,CAAT","file":"NormalAnimation.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\Common","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        loop:true,\r\n        isplay:true,\r\n        sprite:{\r\n            default:null,\r\n            type:cc.Sprite,\r\n        },\r\n        sprites:{\r\n            default:[],\r\n            type:[cc.SpriteFrame],\r\n        },\r\n        fps: {\r\n            default: 5,\r\n            type : cc.Integer,\r\n        },\r\n        index: {\r\n            default: 0,\r\n            type : cc.Integer,\r\n            visible:false,\r\n        },\r\n        delta: {\r\n            default: 0,\r\n            type : cc.Integer,\r\n            visible:false,\r\n        },\r\n        rotationForever:false,\r\n\r\n    },\r\n\r\n    onLoad () {\r\n        if(this.rotationForever){\r\n            this.rotation();\r\n        }\r\n    },\r\n\r\n    rotation(){\r\n        var seq = cc.repeatForever(\r\n                 cc.rotateBy(0.3, 90));\r\n        this.rotationSeq = this.node.runAction(seq);    \r\n    },\r\n\r\n    play()\r\n    {\r\n        // this.node.stopAllActions();\r\n\r\n        this.scheduleOnce(function(){\r\n            if(this.rotationSeq != null){\r\n                this.node.stopAction(this.rotationSeq);\r\n            }\r\n        },0.1);\r\n\r\n        this.index = 0;\r\n        this.delta = 0;\r\n        this.isplay = true;\r\n        this.node.opacity = 255;\r\n        this.sprite.node.active = true;\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.isplay){\r\n            this.delta += dt;\r\n            if(this.fps > 0 && this.sprites.length > 0){\r\n                var rate = 1/this.fps;\r\n                if(rate < this.delta){\r\n                    this.delta = rate > 0 ? this.delta - rate : 0;\r\n                    this.sprite.spriteFrame = this.sprites[this.index];\r\n                    this.index = this.index+1 >= this.sprites.length ? 0 : this.index+1;\r\n                    if(this.index <= 0 && this.loop == false)\r\n                    {\r\n                        this.rotation();\r\n                        this.isplay = false;\r\n                        this.sprite.spriteFrame = this.sprites[0];\r\n                        this.node.opacity = 0;\r\n                        // this.sprite.node.active = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}